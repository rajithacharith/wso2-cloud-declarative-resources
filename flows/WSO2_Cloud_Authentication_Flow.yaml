# File: WSO2_Cloud_Authentication_Flow.yaml
id: 019bdb64-d209-79fe-86c6-66feffefc4db
handle: wso2-cloud-flow
name: WSO2 Cloud Authentication Flow
flowType: AUTHENTICATION
activeVersion: 3
nodes:
  - id: start
    type: START
    onSuccess: choose_auth
  - id: choose_auth
    type: PROMPT
    meta: {"components":[{"id":"text_001","label":"{{ t(signin:heading) }}","type":"TEXT","variant":"HEADING_1"},{"components":[{"eventType":"TRIGGER","id":"action_001","label":"{{ t(elements:buttons.google.text) }}","type":"ACTION","variant":"SOCIAL"},{"eventType":"TRIGGER","id":"action_002","label":"{{ t(elements:buttons.github.text) }}","type":"ACTION","variant":"SOCIAL"}],"id":"block_001","type":"BLOCK"}]}
    prompts:
      - action:
          ref: action_001
          nextNode: google_auth
      - action:
          ref: action_002
          nextNode: github_auth
  - id: google_auth
    type: TASK_EXECUTION
    properties:
      allowAuthenticationWithoutLocalUser: true
      idpId: "bdb4240a-8be6-4a2a-8875-c9194e21b640"
    executor:
      name: GoogleOIDCAuthExecutor
      inputs:
        - ref: input_001
          type: TEXT_INPUT
          identifier: code
          required: true
    onSuccess: prompt_ou_details
  - id: github_auth
    type: TASK_EXECUTION
    properties:
      allowAuthenticationWithoutLocalUser: true
      idpId: "bdb4240a-8be6-4a2a-8875-c9194e21b640"
    executor:
      name: GithubOAuthExecutor
      inputs:
        - ref: input_002
          type: TEXT_INPUT
          identifier: code
          required: true
    onSuccess: prompt_ou_details
  - id: prompt_ou_details
    type: PROMPT
    meta: {"components":[{"id":"text_001","label":"Create Your Organization","type":"TEXT","variant":"HEADING_1"},{"components":[{"id":"input_001","label":"Organization Name","placeholder":"Enter your organization name","ref":"ouName","required":true,"type":"TEXT_INPUT"},{"id":"input_002","label":"Organization Handle","placeholder":"Enter a unique handle (e.g., my-org)","ref":"ouHandle","required":true,"type":"TEXT_INPUT"},{"eventType":"SUBMIT","id":"action_001","label":"Continue","type":"ACTION","variant":"PRIMARY"}],"id":"block_001","type":"BLOCK"}]}
    prompts:
      - inputs:
          - ref: input_001
            type: TEXT_INPUT
            identifier: ouName
            required: true
          - ref: input_002
            type: TEXT_INPUT
            identifier: ouHandle
            required: true
        action:
          ref: action_001
          nextNode: ou_creation
    condition:
      key: "{{ context.userEligibleForProvisioning }}"
      value: true
      onSkip: auth_assert
  - id: ou_creation
    type: TASK_EXECUTION
    executor:
      name: OUExecutor
    onSuccess: provisioning
    condition:
      key: "{{ context.userEligibleForProvisioning }}"
      value: true
      onSkip: auth_assert
  - id: provisioning
    type: TASK_EXECUTION
    executor:
      name: ProvisioningExecutor
    onSuccess: auth_assert
    condition:
      key: "{{ context.userEligibleForProvisioning }}"
      value: true
      onSkip: auth_assert
  - id: auth_assert
    type: TASK_EXECUTION
    executor:
      name: AuthAssertExecutor
    onSuccess: end
  - id: end
    type: END
createdAt: 2026-01-20 12:32:56
updatedAt: 2026-01-20 12:44:09


